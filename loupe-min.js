function scaling(e,t,a){return a.width/e}let cc=(e,...t)=>(t.forEach(t=>t(e)),e);const LSIZE=240;window.addEventListener("DOMContentLoaded",()=>{function e(e){(o=cc(new Image,t=>t.src=e.target.value+"/dressed.jpg")).addEventListener("load",()=>{r=scaling(o.naturalWidth,o.naturalHeight,i),a.height=o.naturalHeight*r,d.clearRect(0,0,a.width,a.height),d.drawImage(o,0,0,o.naturalWidth*r,o.naturalHeight*r)}),l=cc(new Image,t=>t.src=e.target.value+"/naked.jpg")}let t=document.getElementById("wrap");var a=document.querySelector("#dressed"),n=document.querySelector("#naked"),d=a.getContext("2d");window.dctx=d;var o,l,r,u=n.getContext("2d");window.nctx=u;let c=document.getElementById("dir"),i=t.getBoundingClientRect();a.width=i.width,c.addEventListener("change",e),e({target:{value:c.value}});var s=.5,v={x:0,y:0};move_loupe=((e,t)=>{u.clearRect(0,0,240,240),u.drawImage(l,120-e,120-t,l.naturalWidth*r,l.naturalHeight*r),u.globalAlpha=s,u.drawImage(o,120-e,120-t,o.naturalWidth*r,o.naturalHeight*r),u.globalAlpha=1,n.style.top=t-120+"px",n.style.left=e-120+"px",v.x=e,v.y=t}),a.addEventListener("mousemove",e=>{move_loupe(e.offsetX||e.layerX,e.offsetY||e.layerY)}),n.addEventListener("mousemove",e=>{move_loupe(parseFloat(e.target.style.left)+(e.offsetX||e.layerX),Math.max(parseFloat(e.target.style.top)+(e.offsetY||e.layerY),120))}),document.addEventListener("touchstart",e=>e.preventDefault()),document.addEventListener("touchmove",e=>{console.log(e.changedTouches[0]),e.preventDefault();let t=e.changedTouches[0];move_loupe(t.clientX,Math.max(t.clientY,120))}),document.body.addEventListener("touchstart",e=>e.preventDefault()),document.body.addEventListener("touchmove",e=>e.preventDefault()),document.body.parentElement.addEventListener("touchstart",e=>e.preventDefault()),document.body.parentElement.addEventListener("touchmove",e=>e.preventDefault()),n.addEventListener("wheel",e=>{s+=.001*e.deltaY,move_loupe(v.x,v.y)})});
